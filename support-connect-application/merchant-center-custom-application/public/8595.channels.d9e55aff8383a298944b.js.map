{"version":3,"file":"8595.channels.d9e55aff8383a298944b.js","mappings":"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","sources":["webpack://custom-objects/./src/components/custom-objects/messages.js","webpack://custom-objects/./src/components/custom-objects/custom-objects.jsx"],"sourcesContent":["import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  backToWelcome: {\n    id: 'CustomObjects.backToWelcome',\n    defaultMessage: 'Back to Welcome page',\n  },\n  title: {\n    id: 'CustomObjects.title',\n    defaultMessage: 'Custom Objects list',\n  },\n  searchInputTitle: {\n    id: 'CustomObjects.searchInputTitle',\n    defaultMessage: 'Search by Container Name',\n  },\n  demoHint: {\n    id: 'CustomObjects.demoHint',\n    defaultMessage: 'Custom Objects List',\n  },\n  noResults: {\n    id: 'CustomObjects.noResults',\n    defaultMessage: 'There are no custom onbjects available in this project.',\n  },\n});\n","import PropTypes from 'prop-types';\nimport { useIntl } from 'react-intl';\nimport { useState, useEffect } from 'react';\nimport {\n  Link as RouterLink,\n  Switch,\n  useHistory,\n  useRouteMatch,\n} from 'react-router-dom';\nimport { useApplicationContext } from '@commercetools-frontend/application-shell-connectors';\nimport { NO_VALUE_FALLBACK } from '@commercetools-frontend/constants';\nimport {\n  usePaginationState,\n  useDataTableSortingState,\n} from '@commercetools-uikit/hooks';\nimport { BackIcon } from '@commercetools-uikit/icons';\nimport FlatButton from '@commercetools-uikit/flat-button';\nimport LoadingSpinner from '@commercetools-uikit/loading-spinner';\nimport DataTable from '@commercetools-uikit/data-table';\nimport { ContentNotification } from '@commercetools-uikit/notifications';\nimport { Pagination } from '@commercetools-uikit/pagination';\nimport Spacings from '@commercetools-uikit/spacings';\nimport Text from '@commercetools-uikit/text';\nimport { SuspendedRoute } from '@commercetools-frontend/application-shell';\nimport SearchTextInput from '@commercetools-uikit/search-text-input';\nimport messages from './messages';\nimport { useCustomObjectsQuery } from '../../hooks/custom-objects-connector/use-custom-objects-connector';\nimport { getErrorMessage } from '../../helpers';\nimport CustomObjectDetails from '../custom-objects-details/custom-objects-details';\nimport { useAsyncDispatch, actions } from '@commercetools-frontend/sdk';\nimport { MC_API_PROXY_TARGETS } from '@commercetools-frontend/constants';\nimport { useCustomObjectsContext } from '../../context/custom-objects-context';\n\nconst columns = [\n  { key: 'container', label: 'Custom object container', isSortable: true },\n  { key: 'key', label: 'Custom object key', isSortable: true },\n];\n\nconst renderItem = (item, column, dataLocale, projectLanguages) => {\n  switch (column.key) {\n    case 'roles':\n      return item.roles.join(', ');\n    case 'name':\n      return formatLocalizedString(\n        { name: transformLocalizedFieldToLocalizedString(item.nameAllLocales) },\n        {\n          key: 'name',\n          locale: dataLocale,\n          fallbackOrder: projectLanguages,\n          fallback: NO_VALUE_FALLBACK,\n        }\n      );\n    default:\n      return item[column.key];\n  }\n};\n\nconst CustomObjects = ({ linkToWelcome }) => {\n  const intl = useIntl();\n  const { push } = useHistory();\n  const match = useRouteMatch();\n  const { page, perPage } = usePaginationState();\n  const sortingState = useDataTableSortingState({ key: 'key', order: 'asc' });\n  const { customObjects, setCustomObjects } = useCustomObjectsContext();\n\n  const { dataLocale, projectLanguages } = useApplicationContext((context) => ({\n    dataLocale: context.dataLocale,\n    projectLanguages: context.project.languages,\n  }));\n\n  const [searchParam, setSearchParam] = useState('');\n  const [fetchError, setFetchError] = useState(null);\n  const dispatch = useAsyncDispatch();\n\n  // Fetch all custom objects with pagination\n  useEffect(() => {\n    const fetchAllCustomObjects = async () => {\n      try {\n        const result = await dispatch(\n          actions.get({\n            mcApiProxyTarget: MC_API_PROXY_TARGETS.COMMERCETOOLS_PLATFORM,\n            service: 'customObjects',\n            options: {\n              page: page.value,\n              perPage: perPage.value,\n            },\n          })\n        );\n        setCustomObjects(result);\n      } catch (error) {\n        setFetchError(error);\n      }\n    };\n\n    fetchAllCustomObjects();\n  }, [dispatch, page.value, perPage.value]);\n\n  const {\n    customObjectsPaginatedResult,\n    error: queryError,\n    loading,\n  } = useCustomObjectsQuery({\n    param: searchParam,\n    page,\n    perPage,\n    tableSorting: sortingState,\n  });\n\n  if (fetchError || queryError) {\n    return (\n      <ContentNotification type=\"error\">\n        <Text.Body>{getErrorMessage(fetchError || queryError)}</Text.Body>\n      </ContentNotification>\n    );\n  }\n\n  const handleSearchSubmit = (value) => {\n    setSearchParam(value);\n  };\n\n  const handleSearchReset = () => {\n    setSearchParam('');\n  };\n\n  return (\n    <Spacings.Stack scale=\"xl\">\n      <Spacings.Stack scale=\"xs\">\n        <FlatButton\n          as={RouterLink}\n          to={linkToWelcome}\n          label={intl.formatMessage(messages.backToWelcome)}\n          icon={<BackIcon />}\n        />\n        <Text.Headline as=\"h2\" intlMessage={messages.title} />\n      </Spacings.Stack>\n\n      {loading && <LoadingSpinner />}\n\n      <SearchTextInput\n        placeholder={intl.formatMessage(messages.searchInputTitle)}\n        onSubmit={handleSearchSubmit}\n        onReset={handleSearchReset}\n        horizontalConstraint={7}\n      />\n\n      {!searchParam && customObjects ? (\n        <>\n          <CustomObjectsTable\n            data={customObjects.results}\n            sortingState={sortingState}\n            dataLocale={dataLocale}\n            projectLanguages={projectLanguages}\n            onRowClick={(row) =>\n              push(`${match.url}/${row.container}/${row.key}`)\n            }\n          />\n          <Pagination\n            page={page.value}\n            onPageChange={page.onChange}\n            perPage={perPage.value}\n            onPerPageChange={perPage.onChange}\n            totalItems={customObjects.total}\n          />\n          <Switch>\n            <SuspendedRoute path={`${match.path}/:container/:key`}>\n              <CustomObjectDetails onClose={() => push(`${match.url}`)} />\n            </SuspendedRoute>\n          </Switch>\n        </>\n      ) : (\n        customObjectsPaginatedResult && (\n          <>\n            <CustomObjectsTable\n              data={customObjectsPaginatedResult.results}\n              sortingState={sortingState}\n              dataLocale={dataLocale}\n              projectLanguages={projectLanguages}\n              onRowClick={(row) =>\n                push(`${match.url}/${row.container}/${row.key}`)\n              }\n            />\n            <Pagination\n              page={page.value}\n              onPageChange={page.onChange}\n              perPage={perPage.value}\n              onPerPageChange={perPage.onChange}\n              totalItems={customObjectsPaginatedResult.total}\n            />\n            <Switch>\n              <SuspendedRoute path={`${match.path}/:container/:key`}>\n                <CustomObjectDetails onClose={() => push(`${match.url}`)} />\n              </SuspendedRoute>\n            </Switch>\n          </>\n        )\n      )}\n    </Spacings.Stack>\n  );\n};\n\nconst CustomObjectsTable = ({\n  data,\n  sortingState,\n  dataLocale,\n  projectLanguages,\n  onRowClick,\n}) => (\n  <Spacings.Stack scale=\"l\">\n    <DataTable\n      isCondensed\n      columns={columns}\n      rows={data}\n      itemRenderer={(item, column) =>\n        renderItem(item, column, dataLocale, projectLanguages)\n      }\n      sortedBy={sortingState.value.key}\n      sortDirection={sortingState.value.order}\n      onSortChange={sortingState.onChange}\n      onRowClick={onRowClick}\n    />\n  </Spacings.Stack>\n);\n\nCustomObjects.displayName = 'CustomObjects';\nCustomObjects.propTypes = {\n  linkToWelcome: PropTypes.string.isRequired,\n};\n\nCustomObjectsTable.propTypes = {\n  data: PropTypes.array.isRequired,\n  sortingState: PropTypes.object.isRequired,\n  dataLocale: PropTypes.string.isRequired,\n  projectLanguages: PropTypes.array.isRequired,\n  onRowClick: PropTypes.func.isRequired,\n};\n\nexport default CustomObjects;\n"],"names":["defineMessages","backToWelcome","id","defaultMessage","title","searchInputTitle","demoHint","noResults","columns","key","label","isSortable","CustomObjects","_ref","linkToWelcome","intl","useIntl","push","useHistory","match","useRouteMatch","_usePaginationState","usePaginationState","page","perPage","sortingState","useDataTableSortingState","order","_useCustomObjectsCont","useCustomObjectsContext","customObjects","setCustomObjects","_useApplicationContex","useApplicationContext","context","dataLocale","projectLanguages","project","languages","_useState","useState","_useState2","_slicedToArray","searchParam","setSearchParam","_useState3","_useState4","fetchError","setFetchError","dispatch","useAsyncDispatch","useEffect","async","result","actions","mcApiProxyTarget","MC_API_PROXY_TARGETS","service","options","value","error","fetchAllCustomObjects","_useCustomObjectsQuer","useCustomObjectsQuery","param","tableSorting","customObjectsPaginatedResult","queryError","loading","_jsx","ContentNotification","type","children","Text","getErrorMessage","_jsxs","Spacings","scale","FlatButton","as","RouterLink","to","formatMessage","messages","icon","BackIcon","intlMessage","LoadingSpinner","SearchTextInput","placeholder","onSubmit","onReset","handleSearchReset","horizontalConstraint","_Fragment","CustomObjectsTable","data","results","onRowClick","row","url","container","Pagination","onPageChange","onChange","onPerPageChange","totalItems","total","Switch","SuspendedRoute","path","CustomObjectDetails","onClose","_ref2","DataTable","isCondensed","rows","itemRenderer","item","column","renderItem","roles","join","formatLocalizedString","name","transformLocalizedFieldToLocalizedString","nameAllLocales","locale","fallbackOrder","fallback","NO_VALUE_FALLBACK","sortedBy","sortDirection","onSortChange","displayName"],"sourceRoot":""}