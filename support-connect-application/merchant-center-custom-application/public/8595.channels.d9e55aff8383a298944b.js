"use strict";(self.webpackChunkcustom_objects=self.webpackChunkcustom_objects||[]).push([[8595],{"./src/components/custom-objects/custom-objects.jsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var s=o("./node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js"),c=o("./node_modules/react-intl/lib/src/components/useIntl.js"),a=o("./node_modules/react/index.js"),n=o("./node_modules/react-router/esm/react-router.js"),l=o("./node_modules/react-router-dom/esm/react-router-dom.js"),r=o("./node_modules/@commercetools-frontend/application-shell-connectors/dist/commercetools-frontend-application-shell-connectors.esm.js"),i=o("./node_modules/@commercetools-frontend/constants/dist/commercetools-frontend-constants.esm.js"),m=o("./node_modules/@commercetools-uikit/hooks/dist/commercetools-uikit-hooks.esm.js"),u=o("./node_modules/@commercetools-uikit/icons/dist/commercetools-uikit-icons.esm.js"),d=o("./node_modules/@commercetools-uikit/flat-button/dist/commercetools-uikit-flat-button.esm.js"),g=o("./node_modules/@commercetools-uikit/loading-spinner/dist/commercetools-uikit-loading-spinner.esm.js"),j=o("./node_modules/@commercetools-uikit/data-table/dist/commercetools-uikit-data-table.esm.js"),k=o("./node_modules/@commercetools-uikit/notifications/dist/commercetools-uikit-notifications.esm.js"),p=o("./node_modules/@commercetools-uikit/pagination/dist/commercetools-uikit-pagination.esm.js"),h=o("./node_modules/@commercetools-uikit/spacings/dist/commercetools-uikit-spacings.esm.js"),b=o("./node_modules/@commercetools-uikit/text/dist/commercetools-uikit-text.esm.js"),C=o("./node_modules/@commercetools-frontend/application-shell/dist/commercetools-frontend-application-shell.esm.js"),Z=o("./node_modules/@commercetools-uikit/search-text-input/dist/commercetools-uikit-search-text-input.esm.js");const f=(0,o("./node_modules/react-intl/lib/index.js").vU)({backToWelcome:{id:"CustomObjects.backToWelcome",defaultMessage:"Back to Welcome page"},title:{id:"CustomObjects.title",defaultMessage:"Custom Objects list"},searchInputTitle:{id:"CustomObjects.searchInputTitle",defaultMessage:"Search by Container Name"},demoHint:{id:"CustomObjects.demoHint",defaultMessage:"Custom Objects List"},noResults:{id:"CustomObjects.noResults",defaultMessage:"There are no custom onbjects available in this project."}});var _=o("./src/hooks/custom-objects-connector/use-custom-objects-connector.js"),y=o("./src/helpers.js"),L=o("./src/components/custom-objects-details/custom-objects-details.jsx"),x=o("./node_modules/@commercetools-frontend/sdk/dist/commercetools-frontend-sdk.esm.js"),v=o("./src/context/custom-objects-context.js"),O=o("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=[{key:"container",label:"Custom object container",isSortable:!0},{key:"key",label:"Custom object key",isSortable:!0}],CustomObjects=e=>{let t=e.linkToWelcome;const o=(0,c.Z)(),j=(0,n.k6)().push,S=(0,n.$B)(),P=(0,m.nU)(),T=P.page,R=P.perPage,$=(0,m.Bx)({key:"key",order:"asc"}),w=(0,v.R)(),M=w.customObjects,B=w.setCustomObjects,I=(0,r.UV)((e=>({dataLocale:e.dataLocale,projectLanguages:e.project.languages}))),H=I.dataLocale,W=I.projectLanguages,z=(0,a.useState)(""),A=(0,s.Z)(z,2),U=A[0],X=A[1],E=(0,a.useState)(null),N=(0,s.Z)(E,2),Y=N[0],F=N[1],K=(0,x.ZY)();(0,a.useEffect)((()=>{(async()=>{try{const e=await K(x.Nw.get({mcApiProxyTarget:i.Pp.COMMERCETOOLS_PLATFORM,service:"customObjects",options:{page:T.value,perPage:R.value}}));B(e)}catch(e){F(e)}})()}),[K,T.value,R.value]);const D=(0,_.uc)({param:U,page:T,perPage:R,tableSorting:$}),V=D.customObjectsPaginatedResult,q=D.error,G=D.loading;if(Y||q)return(0,O.tZ)(k.I,{type:"error",children:(0,O.tZ)(b.Z.Body,{children:(0,y.e$)(Y||q)})});return(0,O.BX)(h.Z.Stack,{scale:"xl",children:[(0,O.BX)(h.Z.Stack,{scale:"xs",children:[(0,O.tZ)(d.Z,{as:l.rU,to:t,label:o.formatMessage(f.backToWelcome),icon:(0,O.tZ)(u.xC,{})}),(0,O.tZ)(b.Z.Headline,{as:"h2",intlMessage:f.title})]}),G&&(0,O.tZ)(g.Z,{}),(0,O.tZ)(Z.Z,{placeholder:o.formatMessage(f.searchInputTitle),onSubmit:e=>{X(e)},onReset:()=>{X("")},horizontalConstraint:7}),!U&&M?(0,O.BX)(O.HY,{children:[(0,O.tZ)(CustomObjectsTable,{data:M.results,sortingState:$,dataLocale:H,projectLanguages:W,onRowClick:e=>j(`${S.url}/${e.container}/${e.key}`)}),(0,O.tZ)(p.tl,{page:T.value,onPageChange:T.onChange,perPage:R.value,onPerPageChange:R.onChange,totalItems:M.total}),(0,O.tZ)(n.rs,{children:(0,O.tZ)(C.Kv,{path:`${S.path}/:container/:key`,children:(0,O.tZ)(L.Z,{onClose:()=>j(`${S.url}`)})})})]}):V&&(0,O.BX)(O.HY,{children:[(0,O.tZ)(CustomObjectsTable,{data:V.results,sortingState:$,dataLocale:H,projectLanguages:W,onRowClick:e=>j(`${S.url}/${e.container}/${e.key}`)}),(0,O.tZ)(p.tl,{page:T.value,onPageChange:T.onChange,perPage:R.value,onPerPageChange:R.onChange,totalItems:V.total}),(0,O.tZ)(n.rs,{children:(0,O.tZ)(C.Kv,{path:`${S.path}/:container/:key`,children:(0,O.tZ)(L.Z,{onClose:()=>j(`${S.url}`)})})})]})]})},CustomObjectsTable=e=>{let t=e.data,o=e.sortingState,s=e.dataLocale,c=e.projectLanguages,a=e.onRowClick;return(0,O.tZ)(h.Z.Stack,{scale:"l",children:(0,O.tZ)(j.ZP,{isCondensed:!0,columns:S,rows:t,itemRenderer:(e,t)=>((e,t,o,s)=>{switch(t.key){case"roles":return e.roles.join(", ");case"name":return formatLocalizedString({name:transformLocalizedFieldToLocalizedString(e.nameAllLocales)},{key:"name",locale:o,fallbackOrder:s,fallback:i.xL});default:return e[t.key]}})(e,t,s,c),sortedBy:o.value.key,sortDirection:o.value.order,onSortChange:o.onChange,onRowClick:a})})};CustomObjects.displayName="CustomObjects";const P=CustomObjects}}]);
//# sourceMappingURL=8595.channels.d9e55aff8383a298944b.js.map